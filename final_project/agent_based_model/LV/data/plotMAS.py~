import matplotlib.pyplot as plt
import numpy as np

try:
    hyperparams = []
    unproc = open("testcan.log")
    data = []
    for line in unproc:
        spltline = line.split()
        if len(spltline) == 6:
            print("here")
            try:
            

                int(spltline[2])
                hyperparams = spltline[:]
                print(spltline)
            except:
                print("hyperparams except")

        elif (len(spltline) >= 4):
            try:
                if (int(spltline[1]) != 0 and int(spltline[2]) != 0):
                    data.append(
                        [int(spltline[1]),
                         int(spltline[2]) + int(spltline[3]),
                         int(spltline[3])
                        ]
                    )
            except:
                pass

    data = np.array(data)
    print(hyperparams)
    #     console.log(chancePredator, spec0StarveTime, spec0reproductionRate, spec1reproductionRate, totalPop);


    plt.fill_between(data[:, 0], data[:, 1], color="#9A1313", alpha=1, linewidth=2, label="pred")
    plt.fill_between(data[:, 0], data[:, 2], color="#139A92", alpha=1, linewidth=2, label="prey")
    plt.title("Cannibalism=" + hyperparams[0] +
              "chance pred=" + hyperparams[1] +
              ", pred starve time=" + hyperparams[2] +
              ", pred repr rate=" + hyperparams[3] +
              ", prey repr rate=" + hyperparams[4] +
              ", init pop=" + hyperparams[5]
    ) 
    plt.xlabel("Iterations")
    plt.ylabel("Total Population Size")
    plt.legend()

    plt.show()


except FileNotFoundError:
    print("file not found")

